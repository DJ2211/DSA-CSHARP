// hash

using System;
using System.Collections.Generic;

public class ListNode {
	public int val;
	public ListNode next;

	public ListNode(int val) {
		this.val = val;
		this.next = null;
	}
}

public class Solution {
	public static void Main() {
		
		ListNode l = new ListNode(1);
		ListNode head = l; // head of linkedlist

		l.next = new ListNode(2);
		l = l.next;
		l.next = new ListNode(3);
		l = l.next;
		l.next = new ListNode(2);

		RemoveDuplicates rd = new RemoveDuplicates();
		ListNode header = rd.RemoveDuplicate(head);
		
		ListNode iterator = header;

		while(iterator != null) {
			Console.Write(iterator.val + " -> " );
			iterator = iterator.next;
		}
		Console.WriteLine("NULL");
	}
}

public class RemoveDuplicates {
	public ListNode RemoveDuplicate(ListNode head) {
		
		// to get the duplicates, store in map along its freq
		var map = new Dictionary<int, int>();
		ListNode curr = head;

		while(curr != null) {
			if(!map.ContainsKey(curr.val)){
				map[curr.val] = 0;
			}
			map[curr.val]++;
			
			curr = curr.next;
		}
		
		ListNode dummy = new ListNode(0);
		dummy.next = head;
		ListNode prev = dummy;
		
		curr = head;
		// 1,3,3,2,4,5,1
		// 1 -> 2
		// 3 -> 2
		// 2 -> 1
		// 4 -> 1
		// 5 -> 1
		
		//0  1,3,3,2,4,5,1
		// p           p c
		while(curr != null) {
		    if(map[curr.val] > 1) {
		        prev.next = curr.next;
		    } else {
		        prev = curr;
		    }
		    curr = curr.next;
		}
		return dummy.next;
	}
}


