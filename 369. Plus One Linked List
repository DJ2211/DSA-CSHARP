using System;
using System.Collections.Generic;

public class Solution {
	public static void Main() {
		ListNode head = new ListNode(1);
        head.next = new ListNode(2);
        head.next.next = new ListNode(3);
		
		ListNode header = new ListNode(9);
		header.next = new ListNode(9);
		header.next.next = new ListNode(9);
		header.next.next.next = new ListNode(9);
		
		
		// initialize and call PlusOne method
		PlusOne plusOne = new PlusOne();
		ListNode node = plusOne.plus(head);
		
		node = plusOne.plusOneInPlace(header);
		

		ListNode curr = node;

		while(curr != null) {
			Console.Write( curr.val + " ");
			curr = curr.next;
		}
		
	}
}

public class PlusOne {
    
    public ListNode plusOneInPlace(ListNode head) {
        // 9, 9, 9, 9
        ListNode dummy = new ListNode(0);
        dummy.next = head;
        
        ListNode notNine = dummy;
        ListNode curr = notNine;
        
        while(curr != null) {
            if(curr.val != 9) {
                notNine = curr;
            }
            curr = curr.next;
        }
        notNine.val++; // increment the value of not nine element
        
        curr = notNine.next;
        while(curr != null) {
            curr.val = 0;
            curr = curr.next;
        }
        
        return dummy.val > 0 ? dummy : dummy.next;
    }
    
	public ListNode plus(ListNode head) {
		if(head == null) return null;

		ListNode curr = Reverse(head);
		
		int carry = 1;
		ListNode node = null;
		ListNode newNode = null;
		
		// 3,2,1
		// 1
		// 4 2 1
		while(curr != null || carry != 0) {
			int sum = carry;
		
			if(curr != null){
				sum += curr.val;
				curr = curr.next;
			}

			carry = sum/10;
			newNode = new ListNode(sum % 10);
			newNode.next = node;
			node = newNode;
		}
		return node;
	}

	public ListNode Reverse(ListNode head) {
		ListNode currNode = head;
		ListNode prevNode = null;
		while(currNode != null) {
			ListNode nextNode = currNode.next;
			currNode.next = prevNode;
			prevNode = currNode;
			currNode = nextNode;
		}
		return prevNode;
	}
}

public class ListNode {
	public int val;
	public ListNode next;
	
	// constructor
	public ListNode(int val) {
		this.val = val;	
		this.next = null;
	}
}
